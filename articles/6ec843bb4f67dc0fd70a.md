---
title: "Flutterã®ç”»é¢é·ç§»(Navigator)ã‚’ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ä½¿ã£ã¦ã‹ã£ã“ã‚ˆãã€ã‚³ãƒ¼ãƒ‰ã¯ã‚¹ãƒƒã‚­ãƒªã•ã›ãŸã„"
emoji: "ğŸ¦…"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Flutter", "navigator", "Dart", "PageTransition"]
published: true
---

## ç™ºç”Ÿã—ãŸå•é¡Œ

1. Flutterã®Navigatorã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ä¸‹ã‹ã‚‰ä¸Šã¸ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã—ã‹ãªã„(ãƒ•ã‚§ãƒ¼ãƒ‰ã‚„æ¨ªã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’å…¥ã‚ŒãŸã„)
2. Routeã®è¨­å®šã‚’MaterialAppã«è¨˜è¼‰ã—ã¦ã„ãã¨ã€MaterialAppã®ä¸­èº«ãŒè‚¥å¤§åŒ–ã™ã‚‹ã€‚

### ä½œæˆã—ãŸã‚³ãƒ¼ãƒ‰ã®ã‚¤ãƒ¡ãƒ¼ã‚¸

```Dart:main.dart
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'My App',
      localizationsDelegates: [
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
      ],
      supportedLocales: [
        Locale('ja', 'JP'),
      ],
      theme: ThemeData(
        primarySwatch: Colors.brown,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      // ã“ã“ã«å®šç¾©ã™ã‚‹ã“ã¨ã§ã€
      // Navigator.of(context).pushNamed("/aaa");
      // ã§é·ç§»ã§ãã‚‹ãŒã€MaterialAppãŒé•·ããªã‚‹ã“ã¨ã«åŠ ãˆã¦ã€
      // ä¸‹ã‹ã‚‰ä¸Šã¸ã®ç”»é¢é·ç§»ã«ãªã£ã¦ã—ã¾ã†ã®ãŒå«Œã ã€‚
      routes: <String, WidgetBuilder>{
        '/aaa': (_) => new AAA(),
        '/bbb': (_) => new BBB(),
        '/ccc': (_) => new CCC(),
      },
      home: MyHomePage(title: 'My App'),
    );
  }
}
```

## ç’°å¢ƒ

- macOS Catalina 10.15.4
- Android Studio 3.6.1
- Flutter 1.17.0

## çµè«–

### 1. Flutterã®Navigatorã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ä¸‹ã‹ã‚‰ä¸Šã¸ã®ã‚¹ãƒ©ã‚¤ãƒ‰ã—ã‹ãªã„(ãƒ•ã‚§ãƒ¼ãƒ‰ã‚„æ¨ªã®ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’å…¥ã‚ŒãŸã„)

[page_transition](https://pub.dev/packages/page_transition)ã‚’ä½¿ã†ã“ã¨ã§è§£æ±ºã—ã¾ã—ãŸã€‚

```yaml:pubspec.yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter
  page_transition: ^1.1.5
```

```
$ flutter pub get
```

```Dart:main.dart
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'My App',
      localizationsDelegates: [
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
      ],
      supportedLocales: [
        Locale('ja', 'JP'),
      ],
      theme: ThemeData(
        primarySwatch: Colors.brown,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      // ã“ã“
      // Navigator.of(context).pushNamed("/aaa");
      // ã§é·ç§»ã§ãã‚‹ã“ã¨ã«åŠ ãˆã¦ã€é·ç§»ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’è¨­å®šã§ãã‚‹ã€‚
      // ã—ã‹ã—ãªãŒã‚‰ã€MaterialAppãŒã•ã‚‰ã«é•·ããªã£ã¦ã—ã¾ã£ãŸã€‚
      onGenerateRoute: (settings) {
       switch (settings.name) {
        // ã‚ˆãè¦‹ã‚‹å³ã‹ã‚‰å·¦ã¸ç”»é¢é·ç§»ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³
        case '/aaa':
          return PageTransition(
            child: AAA(),
            type: PageTransitionType.rightToLeft,
            settings: settings,
          );
          break;
        // ã˜ã‚“ã‚ã‚Šãƒ•ã‚§ãƒ¼ãƒ‰ã§ç”»é¢é·ç§»ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³
        case '/bbb':
          return PageTransition(
            child: BBB(),
            type: PageTransitionType.fade,
            settings: settings,
          );
          break;
        // Navigatorã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé·ç§»ãƒ‘ã‚¿ãƒ¼ãƒ³
        case '/ccc':
          return PageTransition(
            child: CCC(),
            type: PageTransitionType.downToUp,
            settings: settings,
          );
          break;
        default:
          return null;
ã€€ã€€ã€€ã€€}
      }
      home: MyHomePage(title: 'My App'),
    );
  }
}
```

ã“ã®ã»ã‹ã«ã‚‚ã‚¨ãƒ•ã‚§ã‚¯ãƒˆãŒä½¿ãˆã‚‹ã®ã§ã€[page_transition](https://pub.dev/packages/page_transition)ã‚’è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚

### 2. Routeã®è¨­å®šã‚’MaterialAppã«è¨˜è¼‰ã—ã¦ã„ãã¨ã€MaterialAppã®ä¸­èº«ãŒè‚¥å¤§åŒ–ã™ã‚‹ã€‚

ä»–ã®Laravelã‚„Nuxtã®ã‚ˆã†ã«Routerãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ã¾ã—ãŸã€‚
ã¾ãšã¯ã€`router.dart` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã§routeã¨ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’å®šç¾©ã—ã¦ã‹ã‚‰ã€

```dart:router.dart
import 'package:flutter/material.dart';
import 'package:page_transition/page_transition.dart';
// é©å®œå‘¼ã³ãŸã„ãƒšãƒ¼ã‚¸ã‚’importã—ã¦ãã ã•ã„

mixin PageRouter implements StatelessWidget {

  static Route generate (RouteSettings settings) {
     switch (settings.name) {
        // ã‚ˆãè¦‹ã‚‹å³ã‹ã‚‰å·¦ã¸ç”»é¢é·ç§»ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³
        case '/aaa':
          return PageTransition(
            child: AAA(),
            type: PageTransitionType.rightToLeft,
            settings: settings,
          );
          break;
        // ã˜ã‚“ã‚ã‚Šãƒ•ã‚§ãƒ¼ãƒ‰ã§ç”»é¢é·ç§»ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³
        case '/bbb':
          return PageTransition(
            child: BBB(),
            type: PageTransitionType.fade,
            settings: settings,
          );
          break;
        // Navigatorã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé·ç§»ãƒ‘ã‚¿ãƒ¼ãƒ³
        case '/ccc':
          return PageTransition(
            child: CCC(),
            type: PageTransitionType.downToUp,
            settings: settings,
          );
          break;
        default:
          return null;
    }
  }
}
```

`main.dart` ã§ä½œæˆã—ãŸã‚¯ãƒ©ã‚¹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™ã ã‘ã§OK

```dart:main.dart
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'My App',
      localizationsDelegates: [
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
      ],
      supportedLocales: [
        Locale('ja', 'JP'),
      ],
      theme: ThemeData(
        primarySwatch: Colors.brown,
        visualDensity: VisualDensity.adaptivePlatformDensity,
      ),
      // ã“ã“ã§å‘¼ã³å‡ºã™ã ã‘ã§OK!
      onGenerateRoute: PageRouter.generate
      home: MyHomePage(title: 'My App'),
    );
  }
}
```

ä»Šå¾Œã€ãƒšãƒ¼ã‚¸ã®è¿½åŠ ãŒã‚ã‚‹æ™‚ã«ã¯`router.dart` ã‚’ç·¨é›†ã™ã‚Œã°OKã§ã™ã€‚
ä½•ã‹ä¿®æ­£ç‚¹ã‚„ã‚‚ã£ã¨ã„ã„æ¡ˆãŒã‚ã‚Œã°ãœã²ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã§ãã ã•ã„ï¼
